# Movie List

## Description

The goal of this project was to make a React list app. One had to be able to add to the list from an API and manipulate the list in various ways (edit, delete, etc.).

## Deployment link

link: https://khouryb.github.io/movie-list

## Timeframe

We were given 4 days to complete our app, working independently.

## Technologies used

- React
- CSS

## Brief

- Add a new item to a list
- Mark the item as complete/favorite/(watch, read, listen) later/flag/etc
- Edit an item from a list
- Remove an item from a list
- Clear/delete all items
- Clear/delete only marked items
- Fetch data from at least one 3rd party API using Axios or fetch.
- Make frequent Git commits with descriptive messages, explaining your commit.
- Use React Router to handle multiple pages/views.

## User Stories

- As a user, I want to be able to add movies to the list from an API.
- As a user, I want to be able to delete selected movies from my list.
- As a user, I want to be able to delete all movies from my list
- As a user, I want to be able to mark movies as seen on my list.
- As a user, I want to be able to add my own movies to my list.
- As a user, I want to be able to edit the title of my movie in line.
- As a user, I want to be able to navigate through multiple pages.

## Planning

Having had some experience making a project already, I knew that I wanted to keep this project rather simple and have rock solid foundations that I would be able to build upon if I wanted to at a later date.

I wanted to keep the user interface simple and intuitive so I went with the classic React list style, adding new list items as divs centered in the page. Each list item should have various different options such as mark as watched, edit, etc. Then at the bottom where the lists are added there would be two inputs allowing the user to grab movies from an API or to add their own movies.

## Build Process

This time around I did not focus on implementing my wireframe first, but to add at least some functionality then go about adding some CSS, then I would add some more functionality and implement the ideas I had in my wireframe along with CSS.

First I went about researching various APIs. The first one I looked at seemed like it had quite a long sign up process and they didn't send you your API key immediately, but with the second one I found, all I had to do was type in my email address and it was sent instantly, happy days! This API honestly was a dream to use, everything it returned to me was very readable and the documentation was to understand. They even had a generator that, when you typed a movie in, gave you the parameters you need in an example URL.

Now I set about retrieving data from the API. I built a <form> with a text input field where you enter the movie that you want to get from the API. I added a new useState to the component called newMovie which would track, using an onChange event listener, what the user typed into the field. Then on the form, I added an event listener (onSubmit) that would run a function that would grab the updated state of newMovie to fetch info from the API. Here's some code:

### Form

```javascript
<form className="api-form" onSubmit={handleSubmit}>
  <h3>Add Movie From Database</h3>
  <input
    type="text"
    placeholder="Movie"
    required
    value={newMovie}
    onChange={handleChange}
  />
  <button type="submit">Add Movie</button>
</form>
```

### function run onSubmit

```javascript
const handleSubmit = (e) => {
  e.preventDefault();

  fetch(`https://omdbapi.com/?t=${newMovie}&apikey=80abee2e&`)
    .then((response) => response.json())
    .then((result) =>
      setMovies([
        ...movies,
        {
          title: result.Title,
          genre: result.Genre,
          imdbID: result.imdbID,
          completed: false,
        },
      ])
    );

  setNewMovie("");
};
```

With the API returning what we want (in this case I asked it to give us the title and genre) I can now focus on implementing other parts of the MVP, like adding a feature to allow a user to add their own movies. This is done much like allowing the user to make an API call but users just fill out a form with their own information. A new list item is generated by updating the State of [movies, setMovies], which is passed down as props to a child component called List.js which handles everything to do with the list as a whole and each list item. To make the list, I would map over the movies object in the list component, inserting the values of the props where needed in `<h3>` and `<p>` tags. Here is the code for that:

```javascript
<div className="list-container">
  {props.movies.map((item) => (
    <div className="list-item" key={item.imdbID}>
      <div className="left">
        {/* <p className={item.completed ? 'completed' : null}> */}

        {editing ? (
          <input
            type="text"
            value={item.title}
            className="text-input"
            onChange={(e) => props.updateTitle(e.target.value, item.imdbID)}
            onKeyDown={handleUpdatedDone}
          />
        ) : (
          <h3 className="h3-movie-title" onClick={handleEditing}>
            {item.title}
          </h3>
        )}
        <p>Genre: {item.genre}</p>
      </div>
      <div className="right">
        <input
          className="checkbox"
          type="checkbox"
          onChange={(e) => props.handleCheck(e, item.imdbID)}
        />
        <button onClick={handleEditing}>Edit Title</button>

        {item.completed ? (
          <button onClick={() => props.handleWatched(item.imdb)}>
            Watched!
          </button>
        ) : (
          <button onClick={() => props.handleCompleteMovie(item.imdbID)}>
            Watch
          </button>
        )}
      </div>
    </div>
  ))}
</div>
```

Each list item is split up into two "sides", one for displaying the content and another for various options; a checkbox to delete selected movies, a watched movie button and an edit title button.

Next was to implement a delete all movies and a delete selected movies feature. Delete all movies was easy to implement, just reset the state of movies to an empty array.
Deleting selected would be a lot more involved, I would need a few functions and states to handle this. First being a function that handles what list item is being checked. I called this handleCheck. This function sets an array in the checked state to what check box on what movie list item is currently checked:

```javascript
const handleCheck = (e, id) => {
  let checkedList = [...checked];
  if (!checked.includes(id)) {
    checkedList = [...checked, id];
  } else {
    const index = checked.findIndex((imdbID) => imdbID === id);
    checkedList.splice(index, 1);
  }
  setChecked(checkedList);
};
```

Next was to actually delete the selected items. The function for which is called deleteSelected. It takes all the movies currently in the movies array and filters the ones that are checked by comparing the IDs of the checked array. It then sets the state to the new array:

```javascript
const deleteSelected = () => {
  let newMovie = [...movies];
  newMovie = newMovie.filter((item) => !checked.includes(item.imdbID));
  setMovies(newMovie);
  setChecked([]);
};
```

The last thing I would like to highlight is the addition of a way to edit the title (if you don't like it for some reason). I did this again through the use of a few functions and a new bit of state. I used a state called editing with an initial value of false. This state keeps track of if a user is or isn't editing because I use a ternary operator in the JSX to show either a `<h3>` or a text `<input>` like so:

```javascript
{
  editing ? (
    <input
      type="text"
      value={item.title}
      className="text-input"
      onChange={(e) => props.updateTitle(e.target.value, item.imdbID)}
      onKeyDown={handleUpdatedDone}
    />
  ) : (
    <h3 className="h3-movie-title" onClick={handleEditing}>
      {item.title}
    </h3>
  );
}
```

Either on click of the `<h3>` element or onclick of a button elsewhere runs the function handleEditing() which shows the input box on the UI as the state of editing has been changed to true. the handleUpdateDone() function updates the state of the the title key in movies on on the list item being edited on each keystroke, which is set into stone and initialised on enter with the onKeyDown event listener using the function handleUpdatedDone().

## Challenges

I wouldn't say this project was easier than the first one, but I guess I'm getting used to coding in general. For example, whilst I found the concept of state difficult to get my head around initially, it became quite intuitive to work with by the end of the project and I think I picked it up quicker than I would have done at the start.

Being more specific with the challenges I encountered during this project, I would say that implementing the ability to use check marks to delete selected items was a real hurdle, I had to get help from teachers a number of times. At the end of the second day I thought I had solved it by myself, but after some testing I had a bug that would just not go away. The solution to this was to give each movie item unique ids as I was just generating them from the key that the map() method gives you.

## Wins

- My general coding knowledge has definitely improved, I feel like I can solve problems quicker and new knowledge is easier to understand.
  -I think how I implemented the editing feature of the MVP was quite slick.
- I feel I've gotten better at using git and github.

## Key Takeaways

I can see React as being a useful and powerful tool used to make Apps quickly and efficiently. However it has downsides, like debugging for example as instructions aren't processed line by line it's sometimes difficult to use console logging.

## Future Improvements

- Local storage
- Splitting up the app into more components as this caused some minor bugs whilst editing.
- Responsive design.
